B1. Code theo chuẩn mực (không code tùy tiện quá) cho ra chức năng đã 
B2. Sau đó tối ưu cho code ngắn lại 


Features 
+ Mở rộng tính năng cmt 
+ Chat real time - socket 
+ Mutil auth (hệ thống đăng nhập 2 bảng : user và admin => @guest và @admin => đăng kí @admin trong Kernel.php)
+ OAth2 Google , Facebook (OK)
+ Send Mail 
+ Deploy Laravel to infinity hoặc Railway 





============================ Note ============================
- @guest là kiểm tra người dùng đã đăng nhập hay chưa 
    + đây là 1 role 
    + nếu 2 role thì sao ? 
    + đăng nhập bằng 2 bảng admin và user (key : mutilple - authetication)

- Bỏ quá nhiều folder trong vs code thì sẽ làm cho chức năng ctrl + click => di chuyển đến hàm sẽ không hoạt động nữa, 
    vì nó tìm quá nhiều file 


- Bật tắt thanh Debug trong Laravel : 
    + C:\Users\ADMIN\Downloads\ProLaravel\bloglaravel>composer require barryvdh/laravel-debugbar --dev
    + env : APP_DEBUG=true # tắt thanh https://github.com/barryvdh/laravel-debugbar thì chuyển thành false 



=======================================================================



Câu lệnh	Mô tả
composer create-project --prefer-dist laravel/laravel <tên>	Tạo một project Laravel mới
php artisan serve	Chạy ứng dụng Laravel trên localhost
php artisan make:migration create_<tên-bảng>_table	Tạo migration mới để tạo bảng trong cơ sở dữ liệu
php artisan migrate	Chạy migration để tạo bảng trong cơ sở dữ liệu
php artisan make:model <tên-model>	Tạo model mới
php artisan make:controller <tên-controller>	Tạo controller mới
php artisan make:request <tên-request>	Tạo request mới
php artisan make:middleware <tên-middleware>	Tạo middleware mới
php artisan make:controller --resource <tên-controller>	Tạo resource controller mới
php artisan make:factory <tên-factory> --model=<tên-model>	Tạo factory mới
php artisan make:seeder <tên-seeder>	Tạo seeder mới
php artisan db:seed	Chạy seeder để điền dữ liệu vào cơ sở dữ liệu
php artisan make:route <tên-route>	Tạo mới một route
php artisan key:generate	Tạo một key ứng dụng Laravel
php artisan migrate:rollback	Xóa bảng trong cơ sở dữ liệu

======================================================================================================
Dưới đây là danh sách các directive (câu lệnh điều khiển) trong Laravel Blade Template Engine:
@extends: Được sử dụng để khai báo layout mà view sẽ kế thừa.
@section và @endsection: Được sử dụng để định nghĩa một section trong view.
@yield: Được sử dụng để khai báo một điểm gọi (yield) trong layout để các view con có thể đổ nội dung vào.
@include: Được sử dụng để include một view vào trong view hiện tại.
@if, @elseif và @else: Sử dụng để kiểm tra điều kiện và hiển thị nội dung tương ứng.
@isset và @empty: Sử dụng để kiểm tra xem một biến đã được định nghĩa và không rỗng hay không.
@unless: Tương tự như @if, nhưng kiểm tra điều kiện ngược lại.
@switch, @case và @default: Cho phép xử lý nhiều trường hợp và chọn một khối nội dung tương ứng dựa trên giá trị của biến.
@for: Dùng để lặp qua một phạm vi số lần xác định và hiển thị nội dung tương ứng cho mỗi lần lặp.
@foreach: Dùng để lặp qua một mảng hoặc một collection và hiển thị nội dung tương ứng cho mỗi phần tử.
@while: Sử dụng để lặp lại một đoạn mã trong khi một điều kiện cụ thể đúng.
@php và @endphp: Dùng để viết mã PHP trực tiếp trong template.
@verbatim và @endverbatim: Cho phép hiển thị một đoạn mã nguyên thủy mà không được xử lý như Blade syntax.
@stack và @push: Được sử dụng để quản lý stack (ngăn xếp) các section trong view.
@auth và @guest: Được sử dụng để kiểm tra xem người dùng đã đăng nhập hay chưa.
@error: Sử dụng để hiển thị các thông báo lỗi của validation.
@csrf: Tạo một hidden input chứa token CSRF (Cross-Site Request Forgery) để bảo vệ form.
Đây là một số directive phổ biến trong Laravel Blade, có thể giúp bạn xây dựng các template linh hoạt và mạnh mẽ trong ứng dụng Laravel của mình.



Cách 1 
public function index()
{
    # Nếu mà đã đã đăng nhập thì không vào được trang login nữa . 
    # Ta cũng có một cách khác đó là đăng kí middleware cho nó  
    // if(Auth::check()){
    //     return redirect("dashboard");
    // }
    return view('auth.login');
} 

Cách 2 
Đầu tiên, hãy tạo một middleware mới bằng cách chạy lệnh artisan:
go
Copy code
php artisan make:middleware RedirectIfAuthenticated
Mở file middleware vừa tạo (app/Http/Middleware/RedirectIfAuthenticated.php) và chỉnh sửa phương thức handle như sau:
php
Copy code
public function handle($request, Closure $next, $guard = null)
{
    if (Auth::guard($guard)->check()) {
        // Nếu người dùng đã đăng nhập, chuyển hướng đến trang dashboard
        return redirect()->route('dashboard');
    }

    // Ngược lại, tiếp tục xử lý request
    return $next($request);
}
Đăng ký middleware trong file app/Http/Kernel.php bằng cách thêm vào thuộc tính $routeMiddleware:
php
Copy code
protected $routeMiddleware = [
    // ...
    'guest' => \App\Http\Middleware\RedirectIfAuthenticated::class,
];
Bây giờ, bạn có thể sử dụng middleware guest trong các route mà bạn muốn kiểm tra xem người dùng đã đăng nhập hay chưa. Ví dụ:
php
Copy code
Route::get('/login', 'Auth\LoginController@showLoginForm')->name('login')->middleware('guest');
Route::get('/register', 'Auth\RegisterController@showRegistrationForm')->name('register')->middleware('guest');
Trong ví dụ trên, middleware guest sẽ được áp dụng cho các route /login và /register, đảm bảo rằng chỉ những người dùng chưa đăng nhập mới có thể truy cập vào các trang này. Nếu người dùng đã đăng nhập, middleware sẽ chuyển hướng người dùng đến trang dashboard.

Lưu ý rằng bạn cần đảm bảo rằng route dashboard đã được đăng ký và middleware auth được sử dụng để bảo vệ trang dashboard.





================================================================
+ trong blade thì kiểm tra đã đăng nhập hay chưa bằng @guest 
+ trong web.php (route) thì dùng : middleware(['auth'])
Route::middleware(['auth'])->group(function () {
    Route::get('dashboard', [CustomAuthController::class, 'dashboard']);
    Route::get('signout', [CustomAuthController::class, 'signOut'])->name('signout');
});
+ trong controller thì dùng : 
if(Auth::check()){
    return redirect("dashboard");
}



================================================================
+ Notify trong laravel : 
    + https://github.com/brian2694/laravel-toastr , https://www.souysoeng.com/2021/03/laravel-8x-toastr-notifications-example.html 
    + use Brian2694\Toastr\Facades\Toastr;
    
    + Toastr::info('message', 'title', ['options']);
    + Toastr::success('message', 'title', ['options']);
    + Toastr::warning('message', 'title', ['options']);
    + Toastr::error('message', 'title', ['options']);
    + Toastr::clear();
    + Toastr()->info('message', 'title', ['options']);

    + step 
        + composer require brian2694/laravel-toastr
        + thêm vào config/app.php
            + Brian2694\Toastr\ToastrServiceProvider::class,
            + 'Toastr'  => Brian2694\Toastr\Facades\Toastr::class,
        + php artisan vendor:publish
            => chọn số của package laravel-toastr => enter 
        + thêm vào body của trang web : 
            <script src="http://cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>
            <script src="http://cdn.bootcss.com/toastr.js/latest/js/toastr.min.js"></script>
            {!! Toastr::message() !!}
        + thêm vào head của trang web : 
            <link rel="stylesheet" href="http://cdn.bootcss.com/toastr.js/latest/css/toastr.min.css"> 

================================================================
Login by Google tóm tắt : 
C:\Users\ADMIN\Downloads\ProLaravel\bloglaravel>composer require laravel/socialite
C:\Users\ADMIN\Downloads\ProLaravel\bloglaravel>composer require socialiteproviders/google
C:\Users\ADMIN\Downloads\ProLaravel\bloglaravel>php artisan make:migration add_google_id_to_users_table
C:\Users\ADMIN\Downloads\ProLaravel\bloglaravel\database\migrations\2023_06_29_075104_add_google_id_to_users_table.php
        <?php

        use Illuminate\Database\Migrations\Migration;
        use Illuminate\Database\Schema\Blueprint;
        use Illuminate\Support\Facades\Schema;

        class AddGoogleIdToUsersTable extends Migration
        {
            /**
            * Run the migrations.
            *
            * @return void
            */
            public function up()
            {
                Schema::table('users', function (Blueprint $table) {
                    $table->string('google_id')->nullable();
                });
            }

            public function down()
            {
                Schema::table('users', function (Blueprint $table) {            
                    $table->dropColumn('google_id');
                });
            }
        }
C:\Users\ADMIN\Downloads\ProLaravel\bloglaravel>php artisan migrate
Google API : https://console.cloud.google.com/apis/credentials/oauthclient/1079359168744-ehm0qmfgmg4imvbk33n7d97t69sfjb87.apps.googleusercontent.com
    Authorized JavaScript origins : http://127.0.0.1:8000
    Authorized redirect URIs : http://localhost:8000/authorized/google/callback  <====
C:\Users\ADMIN\Downloads\ProLaravel\bloglaravel\config\services.php
        'google' => [
            'client_id' => '1079359168744-ehm0qmfgmg4imvbk33n7d97t69sfjb87.apps.googleusercontent.com',
            'client_secret' => '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',
            'redirect' => 'http://localhost:8000/authorized/google/callback',    <==== đây là LINK đăng kí trên google API 
        ],
C:\Users\ADMIN\Downloads\ProLaravel\bloglaravel\app\Http\Controllers\CustomAuthController.php
        // Login by Google 
        public function redirectToGoogle()
        {
            return Socialite::driver('google')->redirect();
        }
        public function handleGoogleCallback()
        {
            try {
                $user = Socialite::driver('google')->user();
                $finduser = User::where('google_id', $user->id)->first();
                if($finduser){ // nếu đã tồn tại thì cho vào dashboard 
                    Auth::login($finduser);
                    return redirect()->intended('dashboard');
                }else{// nếu chưa thì tạo account 
                    $newUser = User::create([
                        'name' => $user->name,
                        'email' => $user->email,
                        'google_id'=> $user->id,    
                        'password' => encrypt('123456vanmanh') // mật khẩu mặt định 
                    ]);
                    Auth::login($newUser);
                    return redirect()->intended('dashboard');
                }
            } catch (Exception $e) {
                dd($e->getMessage());
            }
        }
C:\Users\ADMIN\Downloads\ProLaravel\bloglaravel\resources\views\auth\login.blade.php
        <div class="flex items-center justify-end mt-4">
            <a href="{{ url('authorized/google') }}">   <=== đây là link ở web.php 
                <img src="https://developers.google.com/identity/images/btn_google_signin_dark_normal_web.png" style="margin-left: 3em;">
            </a>
        </div>
C:\Users\ADMIN\Downloads\ProLaravel\bloglaravel\routes\web.php
        Route::get('authorized/google', [CustomAuthController::class, 'redirectToGoogle']); <=== đây là link ở blade nhằm gọi đến hàm trong Controller 
        Route::get('authorized/google/callback', [CustomAuthController::class, 'handleGoogleCallback']);

=> XONG , sau đó xử lý gì ở Controller cho hợp lý thì xử lý .  
================================================================
    login bằng google 
        + nếu google_id này đã có trong db => cho login vào  
        + nếu google_id này chưa có trong db 
            + nếu email này chưa có trong db => tạo tài khoản mới (password để trống)
            + nếu email này đã có trong db => chỉ cần bổ sung thêm google id 
            
    user register 
        + mail đã tồn tại 
            + có password => không cho đăng kí nữa 
            + không có password => đây là tài khoản đăng nhập trước đó bằng google 
                => lấy password người dùng nhập bổ sung vào  
        + mail chưa tồn tại => đăng kí như bình thường 

